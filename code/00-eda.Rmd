
---
title: "Gray Whale EDA"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Load libraries & data

```{r}

# libraries
library(dplyr)
library(readr)

# dataset. Note you'll need to change the file path to match where it is on your computer
data <- read.csv("Users/cmantegna/Documents/GitHub/sicb_dp/data/graywhales.csv")

```

# Data cleaning
## uniform variables and backfilling the empty cells
```{r}

# fix variable names in the channel and source columns. 
# since both uppercase and lowercase are used, they will be treated as unique cases, this step stops that from happening. The 'dplyr' package does this.
data <- data %>%
  mutate(Channel = tolower(Channel),
         Source = tolower(Source))

# fill in missing values
# after reviewing the missing data, the missing times were filled in manually with 0:00. 
# missing counts were replaced with 1 because at least one whale was seen to report it.
# missing source or channel names were replaced with 'unknown'
data <- data %>%
  mutate(Count = ifelse(is.na(Count), 1, Count),
         Source = ifelse(is.na(Source), "unknown", Source))

# write out cleaned data to work with later. this is a safety stop so you don't have to keep doing it.
write_csv(data, "Users/cmantegna/Documents/GitHub/sicb_dp/data/cleaned_data.csv")

```

```

## pull out the month from the sighting date
```{r}

# convert SightDate to date format and extract the month
data <- data %>%
  mutate(SightDate = as.Date(SightDate, format = "%m/%d/%y"),
         Month = format(SightDate, "%m"))

```

# EDA
## Counts, total

```{r}

# total number of whales sighted from 2013 - 2023
total_count <- sum(data$Count, na.rm = TRUE)
print(paste("Total Whale Count:", total_count))

```

## Counts, monthly

```{r}

# total number of whales counted per month regardless of year
monthly_counts <- data %>%
  group_by(Month) %>%
  summarise(TotalCount = sum(Count, na.rm = TRUE))

print(monthly_counts)

```

## Counts, quad

```{r}

# total number of whales counted per quad regardless of year
quad_counts <- data %>%
  group_by(Quad) %>%
  summarise(TotalCount = sum(Count, na.rm = TRUE))

print(quad_counts)

```

# Channel and Source Summaries

```{r}

# need to go back and review if I set this up correctly - this is treating these like independent variables, not dependent...

channel_summary <- whale_data %>%
  count(Channel)

source_summary <- whale_data %>%
  count(Source)

print(channel_summary)
print(source_summary)

```

